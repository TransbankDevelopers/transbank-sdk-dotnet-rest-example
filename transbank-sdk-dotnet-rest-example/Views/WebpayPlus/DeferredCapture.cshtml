@{
    ViewBag.Title = "Webpay Plus";
}

<h2>@ViewBag.Title</h2>
<h4>Transaction.Capture</h4>

<pre style="background-color: lightyellow;">PUT: https://webpay3gint.transbank.cl/rswebpaytransaction/api/webpay/v1.0/transactions/<span id="token"></span>/capture
<code></code>
</pre>
<h4>Indique transacción a capturar:</h4>

<div class="form-group">
    <form action="@ViewBag.Action" method="POST" id="capture-form" name="captureForm">
        <div class="form-group">
            <label for="token_ws">Token</label>
            <input type="text" name="token_input" id="token_input" class="form-control" />
        </div>
        <div class="form-group">
            <label for="buy_order">Orden de compra</label>
            <input type="text" name="buy_order" id="buy_order" class="form-control" />
        </div>
        <div class="form-group">
            <label for="authorization_code">Código de autorización</label>
            <input type="text" name="authorization_code" id="authorization_code" class="form-control" />
        </div>
        <div class="form-group">
            <label for="capture_amount">Monto a capturar</label>
            <input type="text" name="capture_amount" id="capture_amount" class="form-control" />
        </div>
        <input type="submit" name="submit" value="Capturar transacción" class="btn btn-info" />
    </form>
</div>

@Html.ActionLink("Volver al inicio", "Index", "Home", null, new { @class = "btn btn-primary" })

<script>
    var token = window.localStorage.getItem("savedToken");
    var buyOrder = window.localStorage.getItem("BuyOrder");
    var authorizationCode = window.localStorage.getItem("AuthorizationCode");
    var captureAmount = window.localStorage.getItem("CaptureAmount");
    document.getElementById("token").innerHTML = token;
    document.getElementById("token_input").value = token;
    document.getElementById("buy_order").value = buyOrder;
    document.getElementById("authorization_code").value = authorizationCode;
    document.getElementById("capture_amount").value = captureAmount;
</script>